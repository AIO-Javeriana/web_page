function Preloader(e){var s={assets:[],cb:function(){},assetLoaded:function(){},debug:!1},t=$.extend({},s,e);this.assets=t.assets,this.cb=t.cb,this.assetLoaded=t.assetLoaded,this.debug=t.debug,this.pending_assets=[],this.running=!1,this.completed=!1,this.discarded=!1,this.preload()}Preloader.prototype.preload=function(){var e=this;e.pending_assets=[];for(var s=0;s<e.assets.length;s++){var t=e.assets[s],d={asset:null,loaded:!1};d.asset=t,e.pending_assets.push(d)}if(e.pending_assets.length>0){e.running=!0;for(var n=0;n<e.pending_assets.length;n++)e.loadOne(e.pending_assets[n])}else e.completed()},Preloader.prototype.loadOne=function(e){var s=this;if(e.loaded===!1){var t=e.asset,d=$("<img />");d.bind("load error",function(){e.loaded=!0,s.debug&&console.log("loaded/error",e),s.assetLoaded(e),s.done()}),d.attr("src",t)}},Preloader.prototype.done=function(){var e=this,s=!0;if(e.discarded)return!1;if(e.completed)return!1;for(var t=0;t<e.pending_assets.length;t++){var d=e.pending_assets[t];if(d.loaded===!1){s=!1;break}}s&&(e.running=!1,e.completed=!0,e.cb())},Preloader.prototype.discard=function(){this.discarded=!0,this.cb=function(){}};